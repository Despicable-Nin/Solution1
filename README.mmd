sequenceDiagram
    participant User
    participant App
    participant GISService as GIS Service
    participant Database
    participant ML as K-Means Library
    participant Map as Map Service

    User->>App: Upload CSV File
    App->>App: Sanitize Data (check for duplicates)
    App->>GISService: Convert Address to Lat/Long
    GISService-->>App: Return Lat/Long
    App->>App: Transform Data for K-Means (ensure numeric types)
    
    App->>Database: Persist Cleaned Data
    Database-->>App: Acknowledge Data Saved

    App->>ML: Perform K-Means Clustering on Lat/Long
    ML-->>App: Return Cluster Results (Cluster IDs and Centroids)

    alt Cluster Results Success
        App->>Map: Generate Map Pinpoints and Centroids
        Map-->>App: Map Rendered with Clusters and Centroids
    else Cluster Results Failure
        App->>User: Show Clustering Error Message
    end

    User-->>Map: View Map with Clustered Points and Centroids
